<!DOCTYPE html> 
<html>
<head>
<meta charset="utf-8">
<title>Look Docs</title>
<link rel="stylesheet" href="jquery-mobile/jquery.mobile-1.4.5.min.css">
	<script src="jquery-mobile/jquery.js"></script>
	<script src="jquery-mobile/jquery.mobile-1.4.5.min.js"></script>
	<script type="text/javascript" charset="utf-8">
		var usuario = window.localStorage.getItem("nombreUsuario");
	
		function buscarRSS(){
			var laUrl;
			var codRss = window.localStorage.getItem("codigoRss");
			$.get('http://127.0.0.1:8080/LookDocs/controller/lookDocs/consultarUrlRss',{idRss:codRss},function(data){
				laUrl = data;
				cargarUrl(laUrl);
			});
		
		}
		function cargarUrl(elLink){
			
			$.get('http://127.0.0.1:8080/LookDocs/controller/lookDocs/buscarRss',{url:elLink},function(data){
			if (data==null) {
				window.alert('No se ha noticias');
			}else{
				$('#mostrarFeeds').empty()
				if(data!=null){
				//Inserta los valores recuperados en la lista desplegable
				$.each(data, function(i, value) {
				$('#mostrarFeeds').append('<div data-role="collapsible" data-theme="a"><h4>'+
				value.titulo+'</h4><p>'+value.descripcion+'</p></div>');
				});}
				//Actualiza la lista desplegable
				$('#mostrarFeeds').fieldcontain("refresh", true);
			};
			});
		}
	
	function toListarRss(){
			window.localStorage.removeItem("codigoRss");
			window.location="ListarRSS.html";
		}
	
	</script>
</head> 
<body>
<div data-role="page" id="page">
  <div data-role="header" data-theme="b">
    <h1>Noticias</h1>
	 <a onclick="toListarRss()" data-icon="arrow-l"  data-rel="close" data-iconpos="notext">Regresar</a>
  </div>
  <div data-role="content">
	<a onclick="buscarRSS()" id="btnCargarNoticias" name="btnCargarNoticias" data-role="button" data-icon="refresh">Toca aqu√≠ para cargar las noticias</a>
  
  	<div data-role="fieldcontain" id="mostrarFeeds" name="mostrarFeeds">
		
  	 
    </div>
  	
  </div>


  
</div>

</body>
</html>
